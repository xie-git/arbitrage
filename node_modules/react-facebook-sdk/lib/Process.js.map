{"version":3,"sources":["../src/Process.jsx"],"names":["Process","state","isWorking","handleClick","evn","preventDefault","stopPropagation","setState","facebook","Error","props","dontWait","onResponse","onError","process","then","response","error","handleFacebookReady","onReady","getElement","children","render","CustomComponent","component","isLoading","isReady","onClick","propTypes","node","func","bool","defaultProps","undefined"],"mappings":"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","file":"Process.js","sourcesContent":["import React, { Component, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport InitFacebook from './InitFacebook';\n\nexport default class Process extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    render: PropTypes.func,\n    component: PropTypes.node,\n    onReady: PropTypes.func,\n    onError: PropTypes.func,\n    onResponse: PropTypes.func,\n    dontWait: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    children: undefined,\n    render: undefined,\n    component: undefined,\n    onReady: undefined,\n    onError: undefined,\n    onResponse: undefined,\n    dontWait: undefined,\n  };\n\n  state = {\n    isWorking: false,\n  };\n\n  handleClick = async (evn) => {\n    evn.preventDefault();\n    evn.stopPropagation();\n\n    this.setState({\n      isWorking: true,\n    });\n\n    try {\n      const { facebook } = this.state;\n      if (!facebook) {\n        throw new Error('Facebook is not initialized');\n      }\n\n      const { dontWait, onResponse, onError } = this.props;\n      if (dontWait) {\n        this.process(facebook).then((response) => {\n          if (onResponse) {\n            onResponse(response);\n          }\n        }, (error) => {\n          if (onError) {\n            onError(error);\n          }\n        });\n      } else {\n        const response = await this.process(facebook);\n\n        if (onResponse) {\n          await onResponse(response);\n        }\n      }\n    } catch (e) {\n      const { onError } = this.props;\n      if (onError) {\n        await onError(e);\n      }\n    }\n\n    this.setState({\n      isWorking: false,\n    });\n  }\n\n  handleFacebookReady = (facebook) => {\n    this.setState({ facebook });\n\n    const { onReady } = this.props;\n    if (onReady) {\n      onReady(facebook);\n    }\n  }\n\n  getElement() {\n    const {\n      children,\n      render,\n      component: CustomComponent,\n    } = this.props;\n\n    const { facebook, isWorking } = this.state;\n    const isLoading = !facebook;\n    const isReady = !isLoading && !isWorking;\n\n    if (render) {\n      return render({\n        isWorking,\n        isLoading,\n        isReady,\n        onClick: this.handleClick,\n      });\n    }\n\n    if (CustomComponent) {\n      return (\n        <CustomComponent\n          onClick={this.handleClick}\n          isLoading={isLoading}\n          isWorking={isWorking}\n          isReady={isReady}\n        />\n      );\n    }\n\n    return cloneElement(children, {\n      onClick: this.handleClick,\n    });\n  }\n\n  render() {\n    return (\n      <InitFacebook onReady={this.handleFacebookReady}>\n        {this.getElement()}\n      </InitFacebook>\n    );\n  }\n}\n"]}